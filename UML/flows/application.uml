@startuml
start

repeat
  partition Pre-Calculation {
    partition Synchronize {
      :Get TOs from [live-trades];
      :Query the status of the TOs;
      :Update the info of the TOs in [live-trades];
      note left: Fill "result" field of the\nclosed ones send to [hist-trades]

    }
    partition Ikarus {
      :Generate Data Object(DO);
    }
  }

  partition Calculation {
    partition Analyzer {
      :Generate Analysis Objects(AO);
    }
    partition Algoritm {
      :Generate Trade Objects(TO);
    }
  
  :Execute TO;
  note left: TO should be executed asap,\n the rest can be performed afterwards
  }

  partition Post-Calculation {
    fork
      :Monitor Account;
      :Write OOs\nto [observer];
    fork again
      :Write new TOs\nto [live-trades];
    end fork
  }
repeat while (Wait until new period)
@enduml